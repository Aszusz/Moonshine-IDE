<?xml version="1.0" encoding="utf-8"?>
<resizableTitleWindow:ResizableTitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark"
		 width="500" minWidth="400" minHeight="100" autoLayout="true"
		 skinClass="components.skins.ResizableTitleWindowSkin" xmlns:resizableTitleWindow="actionScripts.ui.resizableTitleWindow.*" xmlns:marker="actionScripts.ui.marker.*"
		 xmlns:view="actionScripts.plugin.findreplace.view.*" xmlns:mx="library://ns.adobe.com/flex/mx">
	<fx:Script>
		<![CDATA[
			import mx.events.CloseEvent;
			import mx.validators.Validator;
			
			public var userObject:Object;
			
			private var _isGitAvailable:Boolean;
			[Bindable] public function get isGitAvailable():Boolean
			{
				return _isGitAvailable;
			}
			public function set isGitAvailable(value:Boolean):void
			{
				_isGitAvailable = value;
				txtMessage.text = !_isGitAvailable ? "You need Git installed on your system to continue." : "You need to authenticate to GitHub to Push.";
				txtMessage.setStyle("color", !_isGitAvailable ? 0xff0000 : 0xe0e0e0);
			}
			
			private function onSubmit():void
			{
				var tmpArr : Array = new Array(eValidator, pValidator);
				if (Validator.validateAll(tmpArr).length == 0)
				{
					userObject = {userName:txtUser.text, password:txtPassword.text};
					dispatchEvent(new CloseEvent(CloseEvent.CLOSE));
				}
			}
			
		]]>
	</fx:Script>
	<fx:Declarations>
		<mx:StringValidator id="eValidator" source="{txtUser}" property="text" trigger="{btnCommit}" triggerEvent="click"/>
		<mx:StringValidator id="pValidator" source="{txtPassword}" property="text" trigger="{btnCommit}" triggerEvent="click"/>
	</fx:Declarations>
	
	<s:VGroup height="100%" width="100%" 
			  paddingLeft="12" paddingBottom="12" paddingTop="9" paddingRight="12">
		<view:PromptTextInput id="txtUser"
							  width="100%" styleName="textInput"
							  prompt="GitHub User Name"/>
		<view:PromptTextInput id="txtPassword" 
							  prompt="Password" width="100%" styleName="textInput"
							  displayAsPassword="true"/>
		<s:Label id="txtMessage" 
				 text="You need Git installed on your system to continue."
				 width="100%" textAlign="center"/>
	</s:VGroup>
	
	<resizableTitleWindow:controlBarContent>
		<s:Button id="btnCommit" label="Submit"
				  styleName="darkButton" click="onSubmit()"
				  enabled="{isGitAvailable}"/>
	</resizableTitleWindow:controlBarContent>
</resizableTitleWindow:ResizableTitleWindow>